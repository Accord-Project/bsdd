---
title: "SemanticBSDD"
subtitle: "Improving the GraphQL, JSON and RDF Representations of buildingSmart Data Dictionary"
author: "Vladimir Alexiev, Mihail Radkov, Nataliya Keberle"
format:
  revealjs: 
    incremental: false
    footer: "11th Linked Data in Architecture and Construction Workshop, 15--16 June 2023, Matera, Italy"
    slide-number: c/t
    theme: simple
    logo: ../img/ontotext.png
    embed-resources: true
    #parallax-background-image: ../img/background-bridge.png
    #parallax-background-size: "2100px 900px"
    #parallax-background-horizontal: 200
    #parallax-background-vertical: 50
title-slide-attributes:
  data-background-image: ../img/background-bridge.avif
  data-background-size: cover
  data-background-opacity: "0.2"
---
## Objective

- highlight the defects in the original GraphQL implementation of bSDD
- overview the refactored solution proposed by Ontotext
- overview the proposed improvements

## bSDD GraphQL Schema: Voyager 
::: {.panel-tabset}

### Original

[![](../img/bsdd-graphql-voyager-overview.png)](https://rawgit2.com/Accord-Project/bsdd/main/bsdd-graphql-voyager-orig.html){preview-link="true"}

### Refactored 

[![](../img/bsdd-graphql-voyager-refact-overview.png)](https://rawgit2.com/Accord-Project/bsdd/main/bsdd-graphql-voyager-refact.html){preview-link="true"}

:::

## bSDD GraphQL Schema: PlantUML 

PlantUML is used with [soml2puml](https://github.com/VladimirAlexiev/soml/tree/master/soml2puml) convertor tool

![](../img/bsdd-graphql-soml-diagram-overview.png)

## Original GraphQL: Findings (1/3) {.smaller}

- reference entities `ReferenceDocument`, `Country`, `Unit`, `Language`
  are disconnected from the rest of the schema
- relation entities have only an incoming link but no outgoing link
- many entities cannot be queried directly from the `Root` 
- no backward arrows to get from a lower-level entity back to its "parent" entity
- a number of parallel arrows. GraphQL schema can use parameters to distinguish between the different uses


## Original GraphQL: Findings (2/3) {.smaller}

At the high level of detail:

- `Property` and `ClassificationProperty` are very similar, but there's no inheritance/relation between them
- `PropertyValue` and `ClassificationPropertyValue` are exactly the same, so can be reduced to one entity

## Original GraphQL: fragment {.scrollable}

![](../img/bsdd-graphql-voyager-Classification-ClassificationProperty.png)

## Original GraphQL: Findings (3/3) {.smaller}

Even more details:

- mixture of singular/plural in property names
  `property/properties`, 
  `relations`, 
  `synonyms`, 
  `countriesOfUse`, 
  `relatedIfcPropertyNames`, 
  etc.

## Refactored GraphQL: Improvements {.smaller}

- all entities are queryable directly from the `Root`
- link deduplication
- each link is named the same as target entity
- navigation between entities is bidirectional, e.g., `Classification` hierarchy can be navigated both up and down (`parentClassification`, `childClassification`)
- a query can traverse a `Relation` entity to get data about the related entity:
  - `Classification.relation` -> `ClassificationRelation.related` -> `Classification`
  - `Property.relation` -> `PropertyRelation.related` -> `Property`
- a single entity `PropertyValue` is used by both `Property` and `ClassificationProperty`
- property names are in singular

## Refactored GraphQL: Fragment {.scrollable}

![Classification-ClassificationProperty-ClassificationPropertyValue](../img/bsdd-graphql-voyager-refact-Classification-ClassificationProperty.png)

## Graph _i_ QL
::: {.panel-tabset}

### Original

[![](../img/graphiql-orig.png)](https://test.bsdd.buildingsmart.org/graphiql){preview-link="true"}

### Refactored 

[![](../img/graphiql-refact.png)](https://bsdd.ontotext.com/graphiql/){preview-link="true"}

:::

# Suggested Improvements

## Presentation

- uniform identification for the search
- uniform URI design
- equal data retrieved from different API

## Modelling

## Data quality

## Refactoring

## Conclusions and Future Work {.smaller}

Here are further ideas for improvement:

- improvement of [bSDD ontology](https://github.com/buildingSMART/bSDD/blob/master/RDF/preview-bsdd-rdfs-0.4.ttl)
- implement more radical data model refactoring to convert "strings" (countries, reference documents, etc.) into "things"
- link bSDD units of measure to [QUDT ontology](http://qudt.org/2.1/schema/qudt)
- perform deeper data quality analysis using SHACL shapes generation and validation provided by [Ontotext Platform Semantic Objects](https://platform.ontotext.com/semantic-objects/)
- address and resolve more data quality issues, including 
  - seeking correlation between dimension vectors, units of measure and physical quantity, 
  - parsing out enumeration values from `Property/ClassificationProperty` descriptions and creation of corresponding `PropertyValue` lists
- make more graph visualizations
- obtain more interesting statistics using SPARQL

## Acknowledgements {.smaller}

![](../img/accord.png){width=200px} ![](../img/bsdd.png){width=200px} ![](../img/graphdb.png){width=200px} ![](../img/ontotext-platform.png){width=200px}

Funding: [ACCORD project](https://accordproject.eu/), Horizon Europe, grant #101056973

Data: [buildingSMART Data Dictionary](https://www.buildingsmart.org/users/services/buildingsmart-data-dictionary/) 
  (bSI credits: Leon van Berlo, Artur Tomczak, Erik Baars)

Powered by:

- [Ontotext GraphDB](https://graphdb.ontotext.com/)
- [Ontotext Platform Semantic Objects](https://platform.ontotext.com/semantic-objects/)





